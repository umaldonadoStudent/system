<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HCP Member Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .sidebar-link { transition: all 0.2s ease-in-out; }
        .sidebar-link:hover, .sidebar-link.active { background-color: #374151; color: white; }
        .content-page { display: none; }
        .content-page.active { display: block; }
    </style>
</head>
<body class="bg-gray-100">

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="flex items-center justify-center min-h-screen bg-gray-200">
        <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-xl shadow-lg">
            <div class="flex justify-center">
                <!-- Replace with your actual logo SVG or use this placeholder -->
                <div class="flex items-center space-x-2">
                     <svg class="h-10 w-auto" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="40" height="40" rx="8" fill="#2563eb"/><path d="M12 12H16V28H12V12Z" fill="white"/><path d="M28 12H24V28H28V12Z" fill="white"/><path d="M12 19H28V23H12V19Z" fill="white"/></svg>
                    <span class="text-2xl font-bold text-gray-800">Heathrow Capital</span>
                </div>
            </div>
            <h2 class="text-2xl font-bold text-center text-gray-800">Member Portal Login</h2>
            <form id="login-form" class="space-y-6">
                <div>
                    <label for="username" class="text-sm font-medium text-gray-700">Username</label>
                    <input id="username" name="username" type="text" required class="w-full px-4 py-2 mt-2 text-base text-gray-700 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="password" class="text-sm font-medium text-gray-700">Password</label>
                    <input id="password" name="password" type="password" required class="w-full px-4 py-2 mt-2 text-base text-gray-700 bg-gray-100 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <p id="login-error" class="text-sm text-red-500 text-center hidden">Invalid username or password.</p>
                <div>
                    <button type="submit" class="w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                        Login
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MAIN DASHBOARD (Initially Hidden) -->
    <div id="dashboard" class="hidden">
        <div class="flex h-screen bg-gray-200">
            <!-- Sidebar -->
            <div class="w-64 bg-gray-800 text-white flex flex-col">
                <div class="flex items-center justify-center h-20 border-b border-gray-700">
                     <div class="flex items-center space-x-2">
                        <svg class="h-8 w-auto" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="40" height="40" rx="8" fill="#2563eb"/><path d="M12 12H16V28H12V12Z" fill="white"/><path d="M28 12H24V28H28V12Z" fill="white"/><path d="M12 19H28V23H12V19Z" fill="white"/></svg>
                        <span class="text-xl font-bold">HCP Portal</span>
                    </div>
                </div>
                <nav id="sidebar-nav" class="flex-1 px-4 py-6 space-y-2">
                    <a href="#dashboard-home" class="sidebar-link flex items-center px-4 py-2 rounded-lg active">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                        Dashboard
                    </a>
                    <a href="#documents" class="sidebar-link flex items-center px-4 py-2 rounded-lg">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        Document Kits
                    </a>
                    <a href="#reports" class="sidebar-link flex items-center px-4 py-2 rounded-lg">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                        Reports & Analytics
                    </a>
                    <a href="#webinars" class="sidebar-link flex items-center px-4 py-2 rounded-lg">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        Webinars
                    </a>
                    <a href="#subscription" class="sidebar-link flex items-center px-4 py-2 rounded-lg">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
                        Subscription
                    </a>
                </nav>
                <div class="px-4 py-4 border-t border-gray-700">
                    <button id="logout-button" class="w-full sidebar-link flex items-center px-4 py-2 rounded-lg text-left">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                        Logout
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="flex-1 flex flex-col overflow-hidden">
                <header class="flex justify-between items-center p-6 bg-white border-b">
                    <h1 id="page-title" class="text-2xl font-semibold text-gray-800">Dashboard</h1>
                    <div id="user-info" class="text-right">
                        <p class="font-semibold text-gray-800">Welcome, <span id="user-name-display"></span></p>
                        <p class="text-sm text-gray-500">Subscription: <span id="user-tier-display"></span></p>
                    </div>
                </header>
                <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-200 p-6">
                    
                    <!-- PAGE: Dashboard Home -->
                    <div id="dashboard-home-page" class="content-page active">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">Welcome to your Portal</h2>
                        <div class="p-6 bg-white rounded-lg shadow">
                            <p>This is your central hub for all your Heathrow Capital Partners resources. Use the navigation on the left to access your purchased document kits, view market reports, join webinars, and manage your subscription.</p>
                        </div>
                    </div>

                    <!-- PAGE: Document Kits -->
                    <div id="documents-page" class="content-page">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">Your Document Kits</h2>
                        <div id="documents-content" class="p-6 bg-white rounded-lg shadow">
                            <!-- Content will be dynamically inserted here -->
                            <p class="text-gray-500">Your purchased document kits will appear here.</p>
                        </div>
                    </div>

                    <!-- PAGE: Reports & Analytics -->
                    <div id="reports-page" class="content-page">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">Reports & Analytics</h2>
                        <div id="reports-content" class="p-6 bg-white rounded-lg shadow">
                            <!-- Content will be dynamically inserted here -->
                             <p class="text-gray-500">Your purchased reports will appear here.</p>
                        </div>
                    </div>

                    <!-- PAGE: Webinars -->
                    <div id="webinars-page" class="content-page">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">Upcoming Webinars</h2>
                        <div id="webinars-content" class="p-6 bg-white rounded-lg shadow">
                            <!-- Content will be dynamically inserted here -->
                             <p class="text-gray-500">Available webinars will appear here.</p>
                        </div>
                    </div>

                    <!-- PAGE: Subscription -->
                    <div id="subscription-page" class="content-page">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4">Manage Subscription</h2>
                        <div id="subscription-content" class="p-6 bg-white rounded-lg shadow">
                            <!-- Content will be dynamically inserted here -->
                             <p class="text-gray-500">Your subscription details will appear here.</p>
                        </div>
                    </div>

                </main>
            </div>
        </div>
    </div>

    <script>
        // --- MOCK DATA (This will be replaced by your Azure Cosmos DB data) ---
        // This is a simulation of what your database will store.
        // You will manually add users and their content here.
        const mockDatabase = {
            "john@example.com": {
                password: "password123",
                name: "John Investor",
                tier: "Pro",
                content: {
                    documents: `
                        <div class="border-b pb-4 mb-4">
                            <h3 class="font-semibold text-lg">The Ultimate Home Buyer's Kit</h3>
                            <p class="text-sm text-gray-600">All the documents you need for a smooth home purchase.</p>
                            <a href="#" class="text-blue-600 hover:underline mt-2 inline-block">Download Kit (.zip)</a>
                        </div>`,
                    reports: `
                        <div class="border-b pb-4 mb-4">
                            <h3 class="font-semibold text-lg">Lake Mary Q3 Market Report</h3>
                            <p class="text-sm text-gray-600">In-depth analysis of market trends for the third quarter.</p>
                            <a href="#" class="text-blue-600 hover:underline mt-2 inline-block">Download Report (.pdf)</a>
                        </div>`,
                    webinars: `<p>You have access to all webinars as a Pro member.</p>`,
                    subscription: `<p>Your <strong>Pro Plan</strong> is active. Next renewal date: September 24, 2025.</p>`
                }
            },
            "jane@example.com": {
                password: "password456",
                name: "Jane Landlord",
                tier: "Basic",
                content: {
                    documents: `
                        <div class="border-b pb-4 mb-4">
                            <h3 class="font-semibold text-lg">The Landlord Essentials Kit</h3>
                            <p class="text-sm text-gray-600">Manage your rental properties effectively.</p>
                            <a href="#" class="text-blue-600 hover:underline mt-2 inline-block">Download Kit (.zip)</a>
                        </div>`,
                    reports: `<p>Upgrade to the Pro plan to access market reports.</p>`,
                    webinars: `<p>Purchase webinar tickets individually or upgrade to Business for free access.</p>`,
                    subscription: `<p>Your <strong>Basic Plan</strong> is active. Next renewal date: October 1, 2025.</p>`
                }
            }
        };

        // --- APPLICATION LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginScreen = document.getElementById('login-screen');
            const dashboard = document.getElementById('dashboard');
            const loginForm = document.getElementById('login-form');
            const loginError = document.getElementById('login-error');
            const logoutButton = document.getElementById('logout-button');
            const sidebarNav = document.getElementById('sidebar-nav');
            const pageTitle = document.getElementById('page-title');
            
            // Function to handle page navigation
            const navigateTo = (hash) => {
                // Hide all pages
                document.querySelectorAll('.content-page').forEach(page => page.classList.remove('active'));
                // Deactivate all sidebar links
                sidebarNav.querySelectorAll('a').forEach(link => link.classList.remove('active'));

                const targetHash = hash || '#dashboard-home';
                const targetPageId = targetHash.substring(1) + '-page';
                const targetPage = document.getElementById(targetPageId);
                const targetLink = sidebarNav.querySelector(`a[href="${targetHash}"]`);

                if (targetPage && targetLink) {
                    targetPage.classList.add('active');
                    targetLink.classList.add('active');
                    pageTitle.textContent = targetLink.textContent.trim();
                }
            };

            // Function to show the dashboard
            const showDashboard = (user) => {
                loginScreen.style.display = 'none';
                dashboard.style.display = 'block';

                // Populate user-specific info
                document.getElementById('user-name-display').textContent = user.name;
                document.getElementById('user-tier-display').textContent = user.tier;

                // Populate content panes
                document.getElementById('documents-content').innerHTML = user.content.documents;
                document.getElementById('reports-content').innerHTML = user.content.reports;
                document.getElementById('webinars-content').innerHTML = user.content.webinars;
                document.getElementById('subscription-content').innerHTML = user.content.subscription;

                // Set initial page view
                navigateTo(window.location.hash);
            };

            // Function to handle logout
            const logout = () => {
                sessionStorage.removeItem('loggedInUser');
                window.location.hash = '';
                loginScreen.style.display = 'flex';
                dashboard.style.display = 'none';
                loginForm.reset();
            };

            // Check for a logged-in user in session storage
            const loggedInUser = sessionStorage.getItem('loggedInUser');
            if (loggedInUser) {
                const user = mockDatabase[loggedInUser];
                if (user) {
                    showDashboard(user);
                }
            } else {
                loginScreen.style.display = 'flex';
            }

            // Handle login form submission
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                loginError.classList.add('hidden');
                const username = e.target.username.value;
                const password = e.target.password.value;

                // --- THIS IS WHERE YOU'LL CALL YOUR AZURE FUNCTION ---
                // For now, we simulate the check with our mock database
                const user = mockDatabase[username];
                if (user && user.password === password) {
                    sessionStorage.setItem('loggedInUser', username);
                    showDashboard(user);
                } else {
                    loginError.classList.remove('hidden');
                }
            });
            
            // Handle sidebar navigation clicks
            sidebarNav.addEventListener('click', (e) => {
                if (e.target.tagName === 'A' || e.target.closest('a')) {
                    const link = e.target.closest('a');
                    e.preventDefault();
                    window.location.hash = link.getAttribute('href');
                }
            });

            // Handle hash changes for back/forward browser buttons
            window.addEventListener('hashchange', () => navigateTo(window.location.hash));

            // Handle logout button click
            logoutButton.addEventListener('click', logout);
        });
    </script>
</body>
</html>
